---
title: <<Algorithms>>4e 创建对象, 为对象赋值区别
date: 2018-08-09 03:05:24
tags: 算法, Java
---

[Stack(debug版本) - github](https://github.com/timtingwei/coursera-algorithms-part1/blob/master/ch1/1-3/Stack_debug.java)

起因是, 测试代码中的foreach不能遍历
```java
for (String t : s) {
  System.out.println(t);
}
```

在StackIterator类中, 测试hasNext()方法
```java
public boolean hasNext() {
  System.out.println("in hasNext()" + (current != null));
  return current != null;
}
```

在main函数中, 测试isEmpty()
```java
Stack<String> s = new Stack<String>();
System.out.println(s.isEmpty());
s.push("Truing");
s.push("Dijkstra");
s.push("Kruthun");
System.out.println(s.isEmpty());
```

问题出在
```java
public void push(Item elem) {
  // 向栈中添加元素
  Node oldFirst = first;
  // Node first = new Node();           // 这样写的逻辑更直观
  first = new Node();                   // debug: why? 与上一行的区别
  first.next = oldFirst;
  first.item = elem;
  ++N;
}
```

<span style="color:red">疑惑, 构造一个对象时, 下面两行代码的区别?</span>

```java
public void push(Item elem) {
  // 向栈中添加元素
  Node oldFirst = first;
  // Node first = new Node();           // bug
  first = new Node();                   // ok: why? 与上一行的区别
  first.next = oldFirst;
  first.item = elem;
  ++N;
}
```

上一行导致, first对象指向null, 而下一行的first != null
